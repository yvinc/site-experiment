{{ "<!-- i18n.html -->" | safeHTML }}
{{- if hugo.IsMultilingual }}
    {{- $bilingual := eq (where $.Site.Home.AllTranslations ".Language.disabled" "ne" true | len ) 2 }}
    {{- if $bilingual }}
        {{- range where $.Site.Home.AllTranslations "Lang" "ne" $.Lang }}
            {{- $act639  := substr $.Language.LanguageCode 0 2 | upper }}
            {{- $alt639  := substr .Language.LanguageCode 0 2 | upper }}
            {{- $name    := .Language.LanguageName }}
            {{- $flag := partial "i18n/flag.html" (dict "iso3166" (substr .Language.LanguageCode -2)) }}
            <nav id="bi18n" aria-label="{{ i18n "selectLang" }}">
                <a id="has-i18n" class="on-deck"
                    href="{{ .Permalink }}"
                    aria-label="{{ printf "%s %s" (i18n "switchLangTo") $name }}"
                    aria-description="{{ printf "%s %s" (i18n "currentLang") $.Language.LanguageName }}">
                    <span class="emoji">{{ $flag }}&nbsp;</span>
                    <span class="act iso639 sri" aria-hidden="true">{{ $act639 }}</span>
                    <span class="alt iso639 sri" aria-hidden="true">&rarr; {{ $alt639 }}</span>
                    <span class="t srt languangeName">{{ $name }}</span>
                </a>
            </nav>
        {{- end }}
    {{- else }}
        <details id="has-i18n" class="presentation js-details srm" name="on-deck">
            {{- with $.Language }}
                {{- $flag := partial "i18n/flag.html" (dict "iso3166" (substr .LanguageCode -2)) }}
                <summary class="anchor on-deck"
                    aria-label="{{ i18n "selectLang" }}"
                    aria-description="{{ printf "%s %s" (i18n "currentLang") $.Language.LanguageName }}">
                    <span class="emoji">{{ $flag }}&nbsp;</span>
                    <span class="iso639">{{ substr .LanguageCode 0 2 | upper }} </span>
                    <span class="languangeName">{{ .LanguageName }}</span>
                </summary>
            {{- end }}

            {{ "<!-- on hull -->" | safeHTML }}
            <nav id="i18n-menu" aria-label="{{ i18n "selectLang" }}">
                <ul class="on-plank">
                    {{- range where $.Site.Home.AllTranslations "Lang" "ne" $.Lang -}}
                        {{- $flag := partial "i18n/flag.html" (dict "iso3166" (substr .Language.LanguageCode -2)) }}
                        <li>
                            <a href="{{ .Permalink }}" aria-label="{{ printf "Change language to %s" .Language.LanguageName }}">
                                <span class="emoji">{{ $flag }}&nbsp;</span>
                                <span class="languangeName">{{ .Language.LanguageName }}</span>
                            </a>
                        </li>
                    {{- end }}
                </ul>
                <div class="screening js-cgpn" role="presentation" aria-hidden="true"></div>
            </nav>
        </details>
    {{- end }}
{{- end }}
{{/*----------------------- end of i18n.html -----------------------*/}}

{{- define "partials/l10n.html" }}
    {{ "<!-- l10n.html -->" | safeHTML }}
    {{- $page := .page }}
    <details id="has-l10n" class="presentation">
        <summary aria-label="{{ i18n "selectLang" }}" aria-description="{{ printf "%s %s" (i18n "currentLang") $page.Language.LanguageName }}">
            <span>{{ $page.Lang | upper }}</span>
        </summary>
        <nav aria-label="{{ i18n "selectLang" }}">
            <ul class="on-plank" role="presentation">
            {{- range $page.Translations }}
            {{- $flag := partial "i18n/flag.html" (dict "iso3166" (substr .Language.LanguageCode -2)) }}
                <li>
                    <a href="{{ .RelPermalink }}" aria-label="{{ printf "%s %s" (i18n "switchLangTo") .Language.LanguageName }}" aria-description="{{ .LinkTitle }}">
                        <span class="emoji">{{ $flag }}&nbsp;</span>
                        <span>{{ .LinkTitle }}</span>
                    </a>
                </li>
            {{- end }}
            </ul>
        </nav>
    </details>
{{- end }}

{{- define "partials/i18n/flag.html" }}
    {{- $iso3166 := upper .iso3166 }}
    {{- $ris := dict
        "A" "ðŸ‡¦"
        "B" "ðŸ‡§"
        "C" "ðŸ‡¨"
        "D" "ðŸ‡©"
        "E" "ðŸ‡ª"
        "F" "ðŸ‡«"
        "G" "ðŸ‡¬"
        "H" "ðŸ‡­"
        "I" "ðŸ‡®"
        "J" "ðŸ‡¯"
        "K" "ðŸ‡°"
        "L" "ðŸ‡±"
        "M" "ðŸ‡²"
        "N" "ðŸ‡³"
        "O" "ðŸ‡´"
        "P" "ðŸ‡µ"
        "Q" "ðŸ‡¶"
        "R" "ðŸ‡·"
        "S" "ðŸ‡¸"
        "T" "ðŸ‡¹"
        "U" "ðŸ‡º"
        "V" "ðŸ‡»"
        "W" "ðŸ‡¼"
        "X" "ðŸ‡½"
        "Y" "ðŸ‡¾"
        "Z" "ðŸ‡¿"
    }}
    {{- range $key, $val := $ris }}
        {{- $iso3166 = replace $iso3166 $key $val }}
    {{- end }}
    {{- return $iso3166 }}
{{- end }}